name: Collect R

on:
  push:
    paths-ignore:
      - 'test.R'
  pull-request:
    paths-ignore:
      - 'README.md'

jobs:
    run-r-script:
        runs-on: ubuntu-latest
        env:
            GITHUB_PAT: ${{ secrets.GITHUB_TOKEN }}
        permissions:
            contents: write
            pull-requests: write
        steps:
            - name: Checkout repository
              uses: actions/checkout@v4
            - name: Setup R
              uses: r-lib/actions/setup-r@v2

            - uses: r-lib/actions/setup-r-dependencies@v2
              with:
                packages: |
                    gh
            - name: Collect contributor data
              run: Rscript -e 'source("test.R")'
